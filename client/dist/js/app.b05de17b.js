(function(e){function t(t){for(var a,s,i=t[0],c=t[1],l=t[2],u=0,v=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&v.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);f&&f(t);while(v.length)v.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],a=!0,s=1;s<o.length;s++){var c=o[s];0!==n[c]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=o[0]))}return e}var a={},n={app:0},r=[];function s(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"1c323f6d"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,a){o=n[e]=[t,a]}));t.push(o[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=s(e);var l=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(u);var o=n[e];if(0!==o){if(o){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,o[1](l)}n[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(o,a,function(t){return e[t]}.bind(null,a));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var f=l;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},1:function(e,t){},1875:function(e,t,o){"use strict";var a=o("59a8"),n=o.n(a);n.a},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),n=o("bc3a"),r=o.n(n),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("router-view")],1)},i=[],c={name:"App",components:{}},l=c,u=o("2877"),f=o("6544"),v=o.n(f),m=o("7496"),d=Object(u["a"])(l,s,i,!1,null,null,null),p=d.exports;v()(d,{VApp:m["a"]});o("d3b7");var h=o("8c4f"),g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"body"},[o("v-layout",[o("v-flex",[o("v-toolbar",{staticClass:"main-toolbar",attrs:{dark:"",extended:"",flat:""}},[o("v-app-bar-nav-icon"),o("h1",{staticStyle:{color:"white"}},[e._v("ChatApp")])],1)],1)],1),o("v-layout",[o("v-flex",{attrs:{md2:""}},[o("v-layout",[o("v-spacer"),o("v-flex",{attrs:{md6:""}},[o("v-icon",{attrs:{size:"180"}},[e._v("account_circle")])],1),o("v-spacer")],1),o("v-layout",[o("v-spacer"),o("v-flex",{attrs:{md6:""}},[o("strong",[e._v("Username: "+e._s(e.user.username))]),o("br"),o("strong",[e._v("Socket: "+e._s(e.user.socket))])]),o("v-spacer")],1),o("v-layout",[o("v-flex",[o("v-list",[o("v-list-item",{staticStyle:{"margin-top":"16px","border-bottom":"1px solid lightgrey"}},[o("strong",[e._v("Rooms")]),o("v-spacer"),o("v-btn",{attrs:{icon:""},on:{click:function(t){e.createRoomDialog=!0}}},[o("v-icon",[e._v("add")])],1)],1),o("v-list-item",{on:{click:function(t){return t.stopPropagation(),e.joinGlobal(t)}}},[o("v-icon",[e._v("language")]),o("strong",[e._v("Global")])],1),e._l(e.rooms,(function(t){return o("v-list-item",{key:t.id,on:{click:function(o){return o.stopPropagation(),e.joinRoom(t)}}},[o("v-icon",[e._v("group")]),o("strong",[e._v(e._s(t.title))])],1)})),o("v-list-item",{staticStyle:{"margin-top":"16px","border-bottom":"1px solid lightgrey"}},[o("strong",[e._v("Private Chats")])]),e._l(e.onlineUsers,(function(t){return o("v-list-item",{key:t._id,style:e.activeChat===t?"background-color:lightgrey":"",on:{click:function(o){return o.stopPropagation(),e.joinPM(t)}}},[o("v-icon",{attrs:{color:"success"}},[e._v("person")]),o("strong",[e._v(e._s(t))])],1)})),o("v-divider"),e._l(e.offlineUsers,(function(t){return o("v-list-item",{key:t._id,style:e.activeChat===t?"background-color:lightgrey":"",on:{click:function(o){return o.stopPropagation(),e.joinPM(t)}}},[o("v-icon",{attrs:{color:"gray"}},[e._v("person")]),o("strong",{staticStyle:{color:"gray"}},[e._v(e._s(t))])],1)}))],2)],1)],1)],1),o("v-flex",{attrs:{md8:""}},[o("v-card",{staticStyle:{"margin-top":"-64px"}},[o("v-toolbar",{staticClass:"chat-toolbar",attrs:{flat:""}},[o("v-layout",{staticStyle:{"margin-top":"8px"}},[o("v-flex",{attrs:{md4:""}},[o("v-layout",{staticStyle:{"font-size":"24px"}},[o("strong",[e._v(e._s(e.activeChat))])]),o("v-layout",[o("p",[e._v("Online: "+e._s(e.onlineUsers.length))])])],1),o("v-spacer")],1)],1),o("v-divider"),o("v-card-text",{staticStyle:{height:"80vh",overflow:"auto"},attrs:{id:"chat-flow"}},e._l(e.messages,(function(t){return o("v-layout",{key:t._id},[t.messageFrom===e.user.username?o("v-spacer"):e._e(),""!==e.activeChat?[o("v-flex",{attrs:{md4:"","pt-5":""}},[o("v-card",[o("v-card-title",[o("v-icon",[e._v("face")]),e._v(" "+e._s(t.messageFrom)+" ")],1),o("v-divider"),o("v-card-text",[e._v(" "+e._s(t.content)+" ")])],1)],1)]:e._e(),t.messageFrom!==e.user.username?o("v-spacer"):e._e()],2)})),1),o("v-card-actions",[o("v-layout",[o("v-flex",{attrs:{md10:"","align-self-start":""}},[o("v-textarea",{attrs:{"auto-grow":"",rows:"1",outlined:"","single-line":"",label:"Type your message..."},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?(t.preventDefault(),e.sendMessage(t)):null}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),o("v-flex",{attrs:{md2:"","pl-2":"","align-self-start":""}},[o("v-btn",{staticClass:"success",attrs:{"x-large":"",depressed:"",block:"",disabled:!e.message},on:{click:e.sendMessage}},[e._v(" Send ")])],1)],1)],1)],1)],1),o("v-spacer")],1),o("v-dialog",{attrs:{"max-width":"500"},model:{value:e.welcomeDialog,callback:function(t){e.welcomeDialog=t},expression:"welcomeDialog"}},[o("v-card",[o("v-card-title"),o("v-card-text",[o("h1",[e._v("Welcome to ChatApp !")])]),o("v-card-actions",[o("v-btn",{staticClass:"info",attrs:{depressed:"",block:""},on:{click:function(t){t.stopPropagation(),e.welcomeDialog=!1}}},[e._v(" Start Chatting ")])],1)],1)],1),o("v-dialog",{attrs:{"max-width":"900"},model:{value:e.createRoomDialog,callback:function(t){e.createRoomDialog=t},expression:"createRoomDialog"}},[o("v-card",[o("v-card-title",[e._v("Create A Room")]),o("v-card-text",[o("v-layout",[o("v-text-field",{attrs:{label:"Room Title"},model:{value:e.newRoom.title,callback:function(t){e.$set(e.newRoom,"title",t)},expression:"newRoom.title"}})],1),o("v-layout",[o("v-textarea",{attrs:{label:"Room Description"},model:{value:e.newRoom.description,callback:function(t){e.$set(e.newRoom,"description",t)},expression:"newRoom.description"}})],1)],1),o("v-card-actions",[o("v-flex",{attrs:{md2:""}},[o("v-btn",{attrs:{color:"gray",depressed:"",block:""},on:{click:function(t){t.stopPropagation(),e.createRoomDialog=!1}}},[e._v(" Cancel ")])],1),o("v-spacer"),o("v-flex",{attrs:{md2:""}},[o("v-btn",{staticClass:"success",attrs:{depressed:"",block:""},on:{click:function(t){return t.stopPropagation(),e.createRoom(t)}}},[e._v(" Create Room ")])],1)],1)],1)],1)],1)},y=[],b=(o("4160"),o("c975"),o("45fc"),o("a434"),o("159b"),o("5530")),k=o("8055"),x=o.n(k),_=o("2f62"),C={name:"Home",components:{},data:function(){return{socket:x()("https://sau-chat.herokuapp.com/"),rooms:[],message:"",messages:[],onlineUsers:[],offlineUsers:[],welcomeDialog:!1,createRoomDialog:!1,newRoom:{}}},computed:Object(b["a"])({},Object(_["c"])(["user","activeChat"])),created:function(){""===this.user.username&&this.$router.push("/Login")},mounted:function(){this.welcomeDialog=!0,this.scrollToEnd(),""!==this.user.username&&this.joinServer()},methods:Object(b["a"])(Object(b["a"])({},Object(_["b"])(["setUser","setActiveChat"])),{},{joinServer:function(){var e=this;this.socket.on("loggedIn",(function(t){var o={username:e.user.username,socket:t.socket};e.rooms=t.rooms,e.onlineUsers=t.onlineUsers,e.offlineUsers=t.offlineUsers,e.setUser(o),e.socket.emit("newUser",e.user)})),this.listen()},listen:function(){var e=this;this.socket.on("userOnline",(function(t){e.onlineUsers.push(t),e.onlineUsers.forEach((function(t){e.offlineUsers.forEach((function(o){t===o&&e.offlineUsers.splice(e.offlineUsers.indexOf(t),1)}))}))})),this.socket.on("userLeft",(function(t){e.offlineUsers.push(t),e.offlineUsers.forEach((function(t){e.onlineUsers.forEach((function(o){o===t&&e.onlineUsers.splice(e.onlineUsers.indexOf(t),1)}))}))})),this.socket.on("getMessage",(function(t){e.messages.push(t),e.scrollToEnd()}))},sendMessage:function(){var e=this,t={messageFrom:this.user.username,messageTo:this.activeChat,targetSocket:this.activeChat,senderSocket:this.user.socket,content:this.message};this.socket.emit("sendMessage",t),(this.offlineUsers.some((function(t){return t===e.activeChat}))||this.onlineUsers.some((function(t){return t===e.activeChat})))&&this.messages.push(t),this.message="",this.scrollToEnd()},createRoom:function(){var e=this;this.createRoomDialog=!0,this.newRoom.createdBy=this.user.username,this.socket.emit("createRoom",this.newRoom),this.socket.on("getRooms",(function(t){console.log(t),e.rooms=t})),this.newRoom={},this.createRoomDialog=!1},joinRoom:function(e){var t=this;console.log("1"),this.messages=[],this.setActiveChat(e.title);var o={roomId:e._id,roomTitle:e.title,username:this.user.username};this.socket.emit("joinRoom",o),console.log("2"),this.socket.on("roomMessages",(function(e){console.log("3"),t.messages=e})),console.log("4"),this.scrollToEnd()},joinPM:function(e){var t=this;this.messages=[],this.setActiveChat(e);var o={messageFrom:this.user.username,messageTo:this.activeChat,userSocket:this.user.socket};this.socket.emit("joinPM",o),this.socket.on("pmMessages",(function(e){t.messages=e})),setTimeout((function(){t.scrollToEnd()}),100)},joinGlobal:function(){var e=this;this.messages=[],this.setActiveChat("global"),this.socket.emit("joinGlobal"),this.socket.on("getGlobalMessages",(function(t){e.messages=t,e.scrollToEnd()}))},scrollToEnd:function(){var e=this;setTimeout((function(){var t=e.$el.querySelector("#chat-flow");t.scrollTop=t.scrollHeight}),100)}})},w=C,D=(o("1875"),o("5bc1")),U=o("8336"),O=o("b0af"),S=o("99d9"),j=o("169a"),V=o("ce7e"),R=o("0e8f"),T=o("132d"),E=o("a722"),P=o("8860"),A=o("da13"),$=o("2fa4"),L=o("8654"),M=o("a844"),F=o("71d9"),q=Object(u["a"])(w,g,y,!1,null,"85296a3c",null),G=q.exports;v()(q,{VAppBarNavIcon:D["a"],VBtn:U["a"],VCard:O["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:S["c"],VDialog:j["a"],VDivider:V["a"],VFlex:R["a"],VIcon:T["a"],VLayout:E["a"],VList:P["a"],VListItem:A["a"],VSpacer:$["a"],VTextField:L["a"],VTextarea:M["a"],VToolbar:F["a"]});var B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-layout",{attrs:{"justify-center":"","align-center":""}},[o("v-spacer"),o("v-flex",{attrs:{md3:""}},[o("v-card",[o("v-card-title",[o("v-spacer"),o("strong",[e._v("ChatApp")]),o("v-spacer")],1),o("v-card-text",[o("v-layout",[o("v-flex",[o("v-text-field",{attrs:{label:"Username",rules:[e.rules.required]},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)}},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1)],1),o("v-layout",[o("v-flex",[o("v-text-field",{attrs:{label:"Password",type:"password",rules:[e.rules.required]},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)}},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1)],1),o("v-card-actions",[o("v-btn",{staticClass:"success",attrs:{depressed:"",block:""},on:{click:function(t){return t.stopPropagation(),e.enter(t)}}},[e._v(" Login ")])],1)],1),o("v-layout",[o("v-spacer"),o("v-flex",{staticStyle:{"text-align":"center"},attrs:{"pt-4":""}},[o("router-link",{staticStyle:{color:"blue"},attrs:{to:"/SignUp"}},[e._v(" Not a member ? Sign-up real quick. ")])],1),o("v-spacer")],1)],1),o("v-spacer")],1)},I=[],N={Name:"Login",data:function(){return{formData:{},rules:{required:function(e){return!!e||"Required."}}}},computed:{},methods:Object(b["a"])(Object(b["a"])({},Object(_["b"])(["setUser","login","fetchUserSocket"])),{},{enter:function(){var e=this;this.login(this.formData).then((function(){e.fetchUserSocket(e.formData.username).then((function(t){e.formData=t.data.user})).finally((function(){e.setUser(e.formData),e.$router.push("/")}))})).catch((function(e){console.log(e)}))}})},H=N,z=Object(u["a"])(H,B,I,!1,null,null,null),J=z.exports;v()(z,{VBtn:U["a"],VCard:O["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:S["c"],VFlex:R["a"],VLayout:E["a"],VSpacer:$["a"],VTextField:L["a"]});var K=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-layout",{attrs:{"justify-center":"","align-center":""}},[o("v-spacer"),o("v-flex",{attrs:{md3:""}},[o("v-card",[o("v-card-title",[o("v-spacer"),o("strong",[e._v("ChatApp")]),o("v-spacer")],1),o("v-card-text",[o("v-layout",[o("v-flex",[o("v-text-field",{attrs:{label:"Name"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)}},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),o("v-layout",[o("v-flex",[o("v-text-field",{attrs:{label:"Surname"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)}},model:{value:e.formData.surname,callback:function(t){e.$set(e.formData,"surname",t)},expression:"formData.surname"}})],1)],1),o("v-layout",[o("v-flex",[o("v-text-field",{attrs:{label:"Username",rules:[e.rules.required]},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)}},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1)],1),o("v-layout",[o("v-flex",[o("v-text-field",{attrs:{label:"Password",type:"password",rules:[e.rules.required]},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enter(t)}},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1)],1),o("v-card-actions",[o("v-btn",{staticClass:"success",attrs:{depressed:"",block:"",disabled:!e.isFormValid},on:{click:function(t){return t.stopPropagation(),e.enter(t)}}},[e._v(" Sign-Up ")])],1)],1),o("v-layout",[o("v-spacer"),o("v-flex",{staticStyle:{"text-align":"center"},attrs:{"pt-4":""}},[o("router-link",{staticStyle:{color:"blue"},attrs:{to:"/Login"}},[e._v(" Already a member ? Go to Login. ")])],1),o("v-spacer")],1)],1),o("v-spacer")],1)},W=[],Q={Name:"SignUp",data:function(){return{formData:{},rules:{required:function(e){return!!e||"Required."}}}},computed:{isFormValid:function(){return this.formData.username&&this.formData.password}},methods:Object(b["a"])(Object(b["a"])({},Object(_["b"])(["setUser","signup","fetchUserSocket"])),{},{enter:function(){var e=this;this.signup(this.formData).then((function(){e.fetchUserSocket(e.formData.username).then((function(t){e.formData=t.data.user})),e.setUser(e.formData),e.$router.push("/")})).catch((function(e){console.log(e)}))}})},X=Q,Y=Object(u["a"])(X,K,W,!1,null,null,null),Z=Y.exports;v()(Y,{VBtn:U["a"],VCard:O["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:S["c"],VFlex:R["a"],VLayout:E["a"],VSpacer:$["a"],VTextField:L["a"]}),a["a"].use(h["a"]);var ee=[{path:"/",name:"Home",component:G},{path:"/Login",name:"Login",component:J},{path:"/SignUp",name:"SignUp",component:Z},{path:"/about",name:"About",component:function(){return o.e("about").then(o.bind(null,"f820"))}}],te=new h["a"]({mode:"history",base:"/",routes:ee}),oe=te;a["a"].use(_["a"]);var ae=new _["a"].Store({state:{user:{username:""},activeChat:""},getters:{user:function(e){return e.user},activeChat:function(e){return e.activeChat}},mutations:{setUser:function(e,t){e.user=t},setActiveChat:function(e,t){e.activeChat=t}},actions:{setUser:function(e,t){var o=e.commit;o("setUser",t)},setActiveChat:function(e,t){var o=e.commit;o("setActiveChat",t)},login:function(e,t){return r.a.post("/users/login",t)},signup:function(e,t){return r.a.post("/users/signUp",t)},fetchUserSocket:function(e,t){return r.a.get("/users/".concat(t))}},modules:{}}),ne=o("f309");a["a"].use(ne["a"],{iconfont:"md"});var re=new ne["a"]({});a["a"].config.productionTip=!1,r.a.defaults.baseURL="https://sau-chat.herokuapp.com/",new a["a"]({router:oe,store:ae,vuetify:re,render:function(e){return e(p)}}).$mount("#app")},"59a8":function(e,t,o){}});
//# sourceMappingURL=app.b05de17b.js.map